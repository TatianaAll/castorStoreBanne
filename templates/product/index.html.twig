{% extends 'base.html.twig' %}

{% block title %}Produits
{% endblock %}


{% block body %}
	<main>
		<div class="wf-container">
			<div class="row wf-section">
				<div class="col-12 col-md-6 offset-md-3">
					<div class="wf-title-bar text-center">
						<h1 class="h4 m-0">{{ title is defined ? title : 'Produits' }}</h1>
					</div>
				</div>
			</div>

      <div class="row wf-section">
        <div class="col-12 col-md-6 offset-md-3">
            <form method="get" action="{{ path('product_index') }}" class="d-flex mb-4">
                <input 
                    type="text" 
                    name="q" 
                    value="{{ searchTerm|default('') }}" 
                    placeholder="Rechercher un produit..." 
                    class="form-control me-2"
                >
                <button type="submit" class="btn btn-primary">Rechercher</button>
            </form>
        </div>
      </div>


			{% for product in products %}
				<div class="card mb-4 shadow-sm border-0" style="background-color: #472D30; color: white;">
					<div class="row g-0 align-items-center">
						<div class="col-12 col-md-5 col-lg-4 p-3">
							<img src="{{ asset(product.image) }}" class="wf-img-400 w-100" alt="{{ product.name }}">
						</div>
						<div class="col-12 col-md-7 col-lg-8">
							<div class="card-body">
								<h1 class="">{{ product.name }}</h1>
								<div class="text-primary fw-semibold mb-2">{{ product.price|number_format(2, '.', ',') }}
									â‚¬</div>
								<p class="mb-3">{{ product.description }}</p>
								<a href="{{ path('product_show', { id: product.id }) }}" class="btn btn-primary">
									Voir le produit
								</a>
							</div>
						</div>
					</div>
				</div>
			{% else %}
				<p class="text-center text-muted">Aucun produit pour le moment.</p>
			{% endfor %}
		</div>
		<div class="wf-pagination">
			{{ knp_pagination_render(products, '@KnpPaginator/Pagination/bootstrap_v5_pagination.html.twig') }}
		</div>
	</main>
{% endblock %}

{% block footer %}
	{{ parent() }}
{% endblock %}
